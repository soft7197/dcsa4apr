{
    "bug_id": "Jsoup-89",
    "success": true,
    "error": null,
    "patch": null,
    "project_path": "/tmp/d4j_Jsoup-89_1757919395",
    "patches": [
        {
            "hypothesis": "The NullPointerException occurs because the method attempts to access 'parent' without checking if it is null. The setValue method assumes that the attribute is always part of a parent collection, which is not the case for an orphan attribute. We need to add a null check for 'parent' before accessing it.",
            "fixed_method": "public String setValue(String val) {\n    String oldVal = this.val;\n    if (parent != null) {\n        oldVal = parent.get(this.key);\n        int i = parent.indexOfKey(this.key);\n        if (i != Attributes.NotFound) {\n            parent.vals[i] = val;\n        }\n    }\n    this.val = val;\n    return Attributes.checkNotNull(oldVal);\n}",
            "diff": "--- original\n+++ fixed\n@@ -1,13 +1,11 @@\n-/**\n-Set the attribute value.\n-@param val the new attribute value; must not be null\n-*/\n public String setValue(String val) {\n-    String oldVal = parent.get(this.key);\n+    String oldVal = this.val;\n     if (parent != null) {\n+        oldVal = parent.get(this.key);\n         int i = parent.indexOfKey(this.key);\n-        if (i != Attributes.NotFound)\n+        if (i != Attributes.NotFound) {\n             parent.vals[i] = val;\n+        }\n     }\n     this.val = val;\n     return Attributes.checkNotNull(oldVal);\n",
            "file_path": "src/main/java/org/jsoup/nodes/Attribute.java",
            "method_name": "setValue",
            "class_name": "Attribute",
            "iteration": 1,
            "is_multi_method": false,
            "line_numbers": [
                87,
                88,
                89,
                90,
                91,
                92,
                93,
                94,
                95,
                96
            ],
            "original_code": "/**\nSet the attribute value.\n@param val the new attribute value; must not be null\n*/\npublic String setValue(String val) {\n    String oldVal = parent.get(this.key);\n    if (parent != null) {\n        int i = parent.indexOfKey(this.key);\n        if (i != Attributes.NotFound)\n            parent.vals[i] = val;\n    }\n    this.val = val;\n    return Attributes.checkNotNull(oldVal);\n}"
        }
    ],
    "iterations": 1,
    "monitor_file": "traces/Jsoup-89_trace.json"
}